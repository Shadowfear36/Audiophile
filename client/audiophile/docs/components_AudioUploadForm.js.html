<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/AudioUploadForm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/AudioUploadForm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useContext, useEffect} from "react";
import AudioPlayer from "./AudioPlayer";
import { UserContext } from "../context/user";

/**
 * Component for allowing a user to upload an audio file/song.
 *
 * @component
 * @example
 * return (
 *   &lt;AudioUploadForm />
 * )
 */

function AudioUploadForm() {

    // initialize User Context
    const { userState, setUserState } = useContext(UserContext);

    const [name, setName] = useState("");
    const [album, setAlbum] = useState(null);
    const [audioData, setAudioData] = useState(null)
    const [imageData, setImageData] = useState(null)
    const [songUrl, setSongUrl] = useState('')
    const [albumList, setAlbumList] = useState([])

    const handleSubmit = async (e) => {
      e.preventDefault();

      const formData = new FormData()
      formData.append('user_id', userState.user_id)
      formData.append('name', name)
      formData.append('audio', audioData)
      formData.append('image', imageData)
      formData.append('album_id', album)

      fetch('http://localhost:3000/songs', {
        method: 'POST',
        body: formData
      }).then(res => res.json()).then(obj => console.log(obj))
    };

    useEffect(()=> {
      fetch(`http://localhost:3000/users/${userState.user_id}/albums`)
      .then(res =>res.json()).then(obj => setAlbumList(obj))
    },[])

    const renderAlbumList = albumList.map((album) => {
            return &lt;option value={album.id}>{album.name}&lt;/option>
    })

    return (
      &lt;>
      &lt;form onSubmit={handleSubmit} id="audio_upload">
        &lt;div id="upload_container">
          &lt;label for="name">Song Name&lt;/label>
          &lt;input onChange={(e)=> setName(e.target.value)} type="text" id="name"/>
          &lt;select onChange={(e) => setAlbum(e.target.value)}>
            &lt;option value={""}>Choose Album&lt;/option>
            {renderAlbumList}
          &lt;/select>
          &lt;label htmlFor="audio" class="file">Upload Audio File:
          &lt;input type="file" accept="audio/*" id="file" name="audio" onChange={(e) => setAudioData(e.target.files[0])} />
          &lt;/label>
          &lt;label htmlFor="image" class="file">Upload Cover Image:
          &lt;input type="file" accept="image/*" id="file" name="image" onChange={(e) => setImageData(e.target.files[0])} />
          &lt;/label>
        &lt;/div>
        &lt;button type="submit">Submit&lt;/button>
      &lt;/form>
      &lt;/>
      
    );
}

export default AudioUploadForm;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="AudioPlayer.html">AudioPlayer</a></li><li><a href="AudioUploadForm.html">AudioUploadForm</a></li><li><a href="UserProvider.html">UserProvider</a></li><li><a href="module.exports.html">exports</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Mar 27 2023 13:19:00 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
